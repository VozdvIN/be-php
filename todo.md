# Концептуально

~ В первую очередь привести в порядок страницы, актуальные для игроков

~ Максимальное количество запросов к БД, в том числе и специальных, перенести в модель

~ Ссылки между страницами, не связанные с измененим данных, выделять рамками без цветового выделения

~ Все ссылки с измененеим данных выделять цветом

# BUG

! Настроить запоминание сессии на большое время (день)

! Исключение при попытке подать заявку в команду повторно

Некорректно работает разметка в комментариях к полям форм

? Автор игры не может сменить команду организатора на ту, в которой он не капитан (при записи игры не проходит проверка на право изменений)

# Improvement

Вставить в стандартный макет: <meta name="viewport" content="width=device-width,initial-scale=1">

Управление игрой: отдельные страницы меню для больших списков действий (с игрой, заданием команды и т.п.)

Вывод сообщения о необходимости заполнения полей со звездочками сделать зависящим от их наличия

Код таймеров размещать непосредственно в месте использования.

Страница задания: отображение времени до ближайшего ключевого момента и автообновление при его достижении

Убрать лишние подтверждения на формах и ссылках переходов

Упразднить BBCode, разрешить использование HTML

Поиск команд и участников по названию/имени на страницах их выбора

Автоматический прием заявок на игру, т.е. без подтверждения (доработка БД)

Разрешение просмотра предварительных итогов игры до ее финиша (доработка БД)

Текст главной страницы, шапки и подвала разместить в таблице региона/проекта и редактировать вместе с ним (добавить в БД)

Собственные приоритеты заданий в раздел "шаблоны" игры (добавить в БД)

Задания-заглушки (доработка БД)

Бонус за выполнение задания (добавить в БД):
    очки - как корректировка итогов игры
    время:
        - как корректировка итогового времени игры
        - как корректировка доступного игрового времени

Штраф за провал задания (добавить в БД):
    очки - как корректировка итогов игры
    время:
        - как корректировка итогов игры
        - как корректировка доступного игрового времени

Бонус за взятие кода (добавить в БД):
    очки - как корректировка итогов игры
    время:
        - как корректировка итогов игры
        - как корректировка доступного времени задания

Бонусные (необязательные) коды (доработка БД)

Варианты написания кода (хранить построчно в текстовом поле) (доработка БД)

Коды с пробелами (доработка БД)

Корректирующие бонусы/штрафы по очкам/времени после игры (доработка БД)

Для пользователя хранить (доработка БД):
    - дату регистрации,
    - дату последнего входа,
    - дату последней блокировки,
    - число последовательных неудачных попыток входа

Блокировать пользователя за несколько подряд неудачных попыток входа (доработка БД)

# Доработка структуры меню

## Структура основного меню и первого подуровня:
    (проект) - выбор текущего проекта
    Игры
    Команды
    Профиль - профиль текущего пользователя
    Участники
    Модерирование

## Структуры подразделов главного меню:

### + Игры
    ^ - возврат на главную
    Игры - заголовок; полный список игр текущего проекта
        // Указано состояние игр
    Анонсы - список анонсированных игр текущего проекта
    Активные - список активных игр текущего проекта
    Завершены - список завершенных игр текущего проекта

### + Команды
    ^ - возврат на главную
    Команды - заголовок; полный список игр текущего проекта

### + Участники
    ^ - возврат на главную
    Участники - заголовок; полный список неблокированных участников текущего проекта

### Модерирование
    Настройки - только администратор; общие настройки сайта
    Проекты - только администратор; редактирование проектов
    Участники - только модератор участников; управление блокировкой пользователей
    Команды - только модератор команд; управление всеми заявками на создание команд
    Игры - только модератор игр; управление всеми заявками на создание игр

## Структуры меню отдельных сущностей:

### Пользователь // Анкета пользователя, все нижележащие данные - без учета текущего проекта
    + ^ - возврат к списку участников
    + (логин_пользователя) - заголовок; основная анкета
        // Содержит кнопки основных действий с анкетой
        // Для собственной анкеты содержит кнопку смены пароля
    + Команды - список команд, в которых пользователь состоит
        + Игрок - список команд, в которых пользователь состоит как игрок
            // Содержит список команд, в состав которых поданы заявки
            // Для собственной анкеты содержит кнопки отмены поданных заявок
        + Капитан - список команд, в которых пользователь состоит как капитан
            // Для собственной анкеты содержит кнопку подачи заявки на создание команды
            // Для собственной анкеты содержит кнопки отмены поданных заявок
    + Игры - данные об играх, к которым пользоватль имеет отношение
        + Игрок - список игр, в которых пользователь принимал, принимает или будет принимать участие
            // Указано состояние игр
        + Автор - список игр, в организации которых пользователь принимает или принимал участие, без учета проекта
            // Для собственной анкеты содержит кнопку подачи заявки на создание игры
            // Для собственной анкеты содержит кнопки отмены поданных заявок
    + Права - перечень прав или запретов пользователя
        // Для модератора прав содержит инструменты управления правами
    + Выход - выход с сайта

### Команда
    ^ - возврат к списку команд
    (название_команды_краткое) - заголовок; описание команды
    Состав - перечень участников команды
        // Содержит список заявок в состав команды
        // Содержит кнопку подачи заявки в состав текущим пользователем
        // Для капитана содержит инструменты управления составом
        // Для подконтрольных заявок содержит кнопки отмены
    Игры - список игр, в которых команда принимает или принимала участие
    Авторы - список игр, которые команда организовала или организует

### Игра - участие, модуль play
    ^ - возврат к списку игр
    (название_игры) - заголовок; анонс игры
        // При наличии прав автора игры - содержит кнопку перехода в редактор
    Регистрация - список команд, зарегистрированных на игру и подавших заявку
        // Содержит кнопку подачи заявки на игру
        // Содержит кнопки отмены заявок их автором
    Итоги - итоги игры
        Кратко - сводная таблица
        Телеметрия - подробный отчет о действиях команд на заданиях
    Редактор> - при наличии прав автора игры - переход в редактор

### Игра - редактор, модуль game
    ^ - возврат к анонсу игры (для участников)
    (название_игры) - заголовок; общие параметры игры
        // Перенести сюда опции раздела "параметры"
    Регистрация - список зарегистрированных команд и заявок
    Шаблоны - параметры новых заданий по-умолчанию
    Задания> - переход к списку заданий
        Параметры
            //Содержит кнопку создания задания
        Приоритеты
        Переходы
        Фильтры
    Управление> - переход на страницу управления игрой

### Задания игры
    ^ - возврат к анонсу редактору игры
    Задания - заголовок; список заданий
        //Содержит кнопку создания задания
    Приоритеты
    Переходы
    Фильтры

### Задание
    ^ - возврат к списку заданий игры
    (название_задания_внутреннее) - заголовок, параметры задания
    Подсказки
    Ответы
    Переходы
    Фильтры

### Управление игрой
    ^ - возврат к редактору игры
    Задания - текущие задания команд
        //Показывает статус текущих заданий
        //Показывает следующие назначенные задания
        //Позволяет указать следующие задания
    Карта - текущее распределение команд по заданиям и текущие приоритеты заданий
    Телеметрия - подробные данные о текущем статусе игры, команд и текущих заданий

# Deprecated

Возвраты на предыдущие страницы сделать с использованием referrer
    - убрать все, связанное с retUrl и аналогами

Убрать возможность пропуска задания (и инструменты капитана тоже)

Есть неиспользуемые формы, найти и убрать
    - Какие?

Задать правильный порядок полей в формах (ручным отображением в соответствующих фрагментах)
    - Где?

Убрать все, связанное со статьями (удаление из БД).
    - Временно оставить структуры, позволяющие выводить шапку, главную и подвал.

Ручной старт задания (удаление из БД)

Приоритет задания "когда занято" (покомандного достаточно) (удалить из БД)