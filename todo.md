# Концептуально

~ В первую очередь привести в порядок страницы, актуальные для игроков

~ Максимальное количество запросов к БД, в том числе и специальных, перенести в модель

~ Ссылки между страницами, не связанные с изменением данных, выделять рамками без цветового выделения

~ Все ссылки с изменением данных выделять цветом

# BUG

! Настроить запоминание сессии на большое время (день)

! Исключение при попытке подать заявку в команду повторно

Некорректно работает разметка в комментариях к полям форм

? Автор игры не может сменить команду организатора на ту, в которой он не капитан (при записи игры не проходит проверка на право изменений)

# Improvement

## Текущее

Все списки игр сортировать от свежих к старым

Управление игрой: отдельные страницы меню для больших списков действий (с игрой, заданием команды и т.п.)

Код таймеров размещать непосредственно в месте использования.

Убрать лишние подтверждения на формах и ссылках переходов

Упразднить BBCode, разрешить использование HTML

В списках "Команды" и "Игры" сделать подразделы с названием текущего проекта и "Все"

Страница задания: отображение времени до ближайшего ключевого момента и автообновление при его достижении

## С доработкой БД

Автоматический прием заявок на игру, т.е. без подтверждения

Разрешение просмотра предварительных итогов игры до ее финиша

Текст главной страницы, шапки и подвала разместить в таблице региона/проекта и редактировать вместе с ним

Собственные приоритеты заданий в раздел "шаблоны" игры

Задания-заглушки

Бонус за выполнение задания:
    очки - как корректировка итогов игры
    время:
        - как корректировка итогового времени игры
        - как корректировка доступного игрового времени

Штраф за провал задания:
    очки - как корректировка итогов игры
    время:
        - как корректировка итогов игры
        - как корректировка доступного игрового времени

Бонус за взятие кода:
    очки - как корректировка итогов игры
    время:
        - как корректировка итогов игры
        - как корректировка доступного времени задания

Бонусные (необязательные) коды

Варианты написания кода (хранить построчно в текстовом поле)

Коды с пробелами

Корректирующие бонусы/штрафы по очкам/времени после игры

Для пользователя хранить:
    - дату регистрации,
    - дату последнего входа,
    - дату последней блокировки,
    - число последовательных неудачных попыток входа

Блокировать пользователя за несколько подряд неудачных попыток входа

# Доработка структуры меню

## + Структура основного меню и первого подуровня:
    (проект) - заголвок; выбор текущего проекта
    Игры
    Команды
    Профиль - профиль текущего пользователя
    Участники
    Модерирование

## Структуры подразделов главного меню:

### + Игры
    ^ - возврат на главную
    Игры - заголовок; полный список игр текущего проекта
        // Указано состояние игр
    Анонсы - список анонсированных игр текущего проекта
    Активные - список активных игр текущего проекта
    Завершены - список завершенных игр текущего проекта

### + Команды
    ^ - возврат на главную
    Команды - заголовок; полный список команд текущего проекта

### + Участники
    ^ - возврат на главную
    Участники - заголовок; полный список неблокированных участников текущего проекта

### Модерирование
    Настройки - только администратор;
        // Общие настройки сайта
    Проекты - только администратор;
        // Редактирование проектов
    Участники - только модератор участников;
        // Управление блокировкой пользователей
    Команды - только модератор команд;
        // Управление всеми заявками на создание команд
        // Принудительное включение игрока в команду
    Игры - только модератор игр;
        // Управление всеми заявками на создание игр
        // Принудительное включение команды на игру

## Структуры меню отдельных сущностей:

### + Пользователь // все нижележащие данные - без учета текущего проекта
    ^ - возврат к списку участников
    (логин_пользователя) - заголовок; основная анкета
        // Содержит кнопки основных действий с анкетой
        // Для собственной анкеты содержит кнопку смены пароля
    Команды - список команд, в которых пользователь состоит
        Заявки - список команд, в состав которых поданы заявки
            // Содержит список команд, в состав которых поданы заявки
        Игрок - список команд, в которых пользователь состоит как игрок
        Капитан - список команд, в которых пользователь состоит как капитан
        Создание - список заявок на создание команды, поданных пользователем
            // Для собственной анкеты содержит кнопку подачи заявки на создание команды
            // Для собственной анкеты содержит кнопки отмены поданных заявок
    Игры - данные об играх, к которым пользователь имеет отношение
        Игрок - список игр, в которых пользователь принимал, принимает или будет принимать участие
            // Указано состояние игр
        Организатор - список игр, к организации которых пользователь имеет отношение, без учета проекта
            // Указано состояние игр
    Права - перечень прав или запретов пользователя
        // Для модератора прав содержит инструменты управления правами
    Выход - выход с сайта

### + Команда // все нижележащие данные - без учета текущего проекта
    ^ - возврат к списку команд
    (название_команды_краткое) - заголовок; описание команды
    Состав - ...
        Список - перечень участников команды
            // Для капитана содержит инструменты управления составом
            // Для модератора содержит кнопку включения произвольного пользователя в состав
        Заявки - перечень поданных заявок
            // Содержит кнопку подачи заявки в состав текущим пользователем
            // Для текущего пользователя содержит кнопку отмены своей заявки (при наличии таковой)
            // Для капитана содержит кнопки принятия и отмены заявок
    Игры - список игр, в которых команда принимает или принимала участие
        // Указано состояние игр
    Организация - ...
        Игры - список игр, которые команда организовала или организует
            // Указано состояние игр
        Заявки - список заявок на создание игры, поданных командой
            // Для капитана команды содержит кнопки отмены заявок на создание игры
            // Для капитана команды содержит кнопку подачи заявки на создание игры

### + Игра - участие, модуль game
    ^ - возврат к списку игр
    (название_игры) - заголовок; анонс игры
        // Если игра не стартовала содержит кнопку подачи заявки на игру
    Регистрация - список команд, зарегистрированных на игру и подавших заявку
        // Содержит кнопку подачи заявки на игру
        // Содержит кнопки отмены заявок их автором
    Итоги - при завершении игры - итоги игры
        Места - сводная таблица
        Телеметрия - подробный отчет о действиях команд на заданиях
    Редактор> - при наличии прав автора игры - переход в редактор

### Игра - редактор, модуль gameEdit
    ^ - возврат к анонсу игры (для участников)
    (название_игры) - заголовок; общие параметры игры
        // Перенести сюда опции раздела "параметры"
    Регистрация - список зарегистрированных команд и заявок
    Шаблоны - параметры новых заданий по-умолчанию
    Задания> - переход к списку заданий
        Параметры
            //Содержит кнопку создания задания
        Приоритеты
        Переходы
        Фильтры
    Управление> - переход на страницу управления игрой

### Задания игры
    ^ - возврат к редактору игры
    Задания - заголовок; список заданий
        //Содержит кнопку создания задания
    Приоритеты
    Переходы
    Фильтры

### Задание
    ^ - возврат к списку заданий игры
    (название_задания_внутреннее) - заголовок, параметры задания
    Подсказки
    Ответы
    Переходы
    Фильтры

### Управление игрой, модуль gameControl
    ^ - возврат к редактору игры
    Пилот - текущие задания команд
        //Показывает статус текущих заданий
        //Показывает следующие назначенные задания
        //Позволяет указать следующие задания
    Штурман - текущее распределение команд по заданиям и текущие приоритеты заданий
    Бортмеханик - подробные данные о текущем статусе игры, команд и текущих заданий

# Deprecated

Возвраты на предыдущие страницы сделать с использованием referrer
    - убрать все, связанное с retUrl и аналогами

Убрать возможность пропуска задания (и инструменты капитана тоже)

Есть неиспользуемые формы, найти и убрать
    - Какие?

Задать правильный порядок полей в формах (ручным отображением в соответствующих фрагментах)
    - Где?

Убрать все, связанное со статьями (удаление из БД).
    - Временно оставить структуры, позволяющие выводить шапку, главную и подвал.

Ручной старт задания (удаление из БД)

Приоритет задания "когда занято" (покомандного достаточно) (удалить из БД)